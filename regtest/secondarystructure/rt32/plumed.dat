MOLINFO STRUCTURE=helix.pdb

alpha: ALPHARMSD RESIDUES=all TYPE=DRMSD 
alpha_lt: LESS_THAN ARG=alpha SWITCH={RATIONAL R_0=0.08 NN=8 MM=12 NOSTRETCH} 
a: COMBINE ARG=alpha_lt PERIODIC=NO

beta: ANTIBETARMSD RESIDUES=all TYPE=DRMSD STRANDS_CUTOFF=1.0 
anti_lt: LESS_THAN ARG=beta SWITCH={RATIONAL R_0=0.08 NN=8 MM=12 NOSTRETCH} 
b: COMBINE ARG=anti_lt PERIODIC=NO

para: PARABETARMSD RESIDUES=all TYPE=DRMSD STRANDS_CUTOFF=1.0 
para_low: LOWEST ARG1=para.struct-1 ARG2=para.struct-2
para_lt: LESS_THAN ARG=para_low SWITCH={RATIONAL R_0=0.08 NN=8 MM=12 NOSTRETCH} 
p: COMBINE ARG=para_lt PERIODIC=NO

PRINT ARG=a,b,p STRIDE=1 FILE=colvar FMT=%8.4f

ALPHARMSD RESIDUES=2-7 TYPE=DRMSD R_0=0.08 NN=8 MM=12 LABEL=a2
ALPHARMSD RESIDUES=2-7 TYPE=DRMSD R_0=0.08 NN=8 MM=12 NUMERICAL_DERIVATIVES LABEL=a2num
DUMPDERIVATIVES ARG=a2.*,a2num.*  FILE=derivatives1 FMT=%8.4f STRIDE=1
ANTIBETARMSD RESIDUES=3-5,8-10 STYLE=inter TYPE=OPTIMAL LESS_THAN={RATIONAL R_0=0.08 NN=8 MM=12 NOSTRETCH} LABEL=b2
ANTIBETARMSD RESIDUES=3-5,8-10 STYLE=inter TYPE=OPTIMAL LESS_THAN={RATIONAL R_0=0.08 NN=8 MM=12 NOSTRETCH} NUMERICAL_DERIVATIVES LABEL=b2num
DUMPDERIVATIVES ARG=b2.*,b2num.*  FILE=derivatives2 FMT=%8.3f STRIDE=1

RESTRAINT ARG=b,p,a,a2_lessthan,b2_lessthan AT=0,1,2,3,4 KAPPA=1,2,3,4,5 SLOPE=5,4,3,2,1
